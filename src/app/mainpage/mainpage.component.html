<div class='mainpage-container'>
  <div class='mainpage-title'>
    –°–µ—Ä–≤–∏—Å –æ–ø—Ä–æ—Å–æ–≤
  </div>
  <div *ngIf='!isLoaded' class='mainpage-loading'>
    <img src='assets/preloader-blue.png'/>
  </div>
  <ng-container *ngIf='isLoaded'>
    <ng-container *ngIf='!answered'>
      <div *ngIf='!activeSurvey' class='mainpage-message'>
        –°–µ–π—á–∞—Å –Ω–µ –ø—Ä–æ–≤–æ–¥–∏—Ç—Å—è –Ω–∏–∫–∞–∫–∏—Ö –æ–ø—Ä–æ—Å–æ–≤.<br>
        –ú–æ–∂–µ—Ç –±—ã—Ç—å —Å—Ç–æ–∏—Ç –ø–æ–ø—Ä–æ—Å–∏—Ç—å –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–∞ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –æ–¥–∏–Ω? üòÑ
      </div>
      <div *ngIf='activeSurvey' class='mainpage-survey'>
        <ng-container>
          <div class='mainpage-survey-general'>
            <div class='mainpage-survey-name'>
              <span class='mainpage-survey-name-name'>{{activeSurvey.data.Title}}</span>
            </div>
            <div class='mainpage-survey-desc'>
              –û–ø–∏—Å–∞–Ω–∏–µ:
              <span class='mainpage-survey-desc-desc'>{{activeSurvey.data.Description}}</span>
            </div>
          </div>
          <div *ngIf='!isAnswering' on-click='startSurvey()' class='mainpage-survey-go'>–ü—Ä–æ–π—Ç–∏</div>
          <div *ngIf='isAnswering' class='mainage-survey-body'>
            <div *ngFor='let question of activeSurvey.questions; let globalIndex = index' class='mainpage-survey-question'>
              <div class='mainpage-question-title'>{{globalIndex + 1}}. {{question.Title}}</div>
              <div class='mainpage-question-addition'>{{question.Addition}}</div>
              <div class='mainpage-question-body'>
                <!--–¢–ï–ö–°–¢-->
                <textarea [(ngModel)]='tempAnswers[globalIndex]' on-keyup='updateAnswerState(globalIndex, $event, "–¢–µ–∫—Å—Ç")' on-change='updateAnswerState(globalIndex, $event, "–¢–µ–∫—Å—Ç")' *ngIf='question.Type === "–¢–µ–∫—Å—Ç"'></textarea>

                <!--–í—ã–±–æ—Ä (1 –≤–∞—Ä–∏–∞–Ω—Ç)-->
                <div class='mainpage-question-input-group' *ngIf='question.Type === "–í—ã–±–æ—Ä (1 –≤–∞—Ä–∏–∞–Ω—Ç)"'>
                  <label *ngFor='let option of question.Settings.split(";")'><input [(ngModel)]='tempAnswers[globalIndex]' on-change='updateAnswerState(globalIndex, $event, "–í—ã–±–æ—Ä (1 –≤–∞—Ä–∏–∞–Ω—Ç)")' value='{{option}}' type='radio' name='question.Title'/>{{option}}</label>
                </div>

                <!--–í—ã–±–æ—Ä (–Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤)-->
                <div class='mainpage-question-input-group' *ngIf='question.Type === "–í—ã–±–æ—Ä (–Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤)"'>
                  <label *ngFor='let option of question.Settings.split(";")'><input [checked]='tempAnswers[globalIndex] ? tempAnswers[globalIndex].indexOf(option) > -1 : false' on-change='updateAnswerState(globalIndex, $event, "–í—ã–±–æ—Ä (–Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤)")' value='{{option}}' type='checkbox' name='question.Title'/>{{option}}</label>
                </div>

                <!--–í—ã–±–æ—Ä (—à–∫–∞–ª–∞ –æ—Ü–µ–Ω–æ–∫)-->
                <div class='mainpage-question-input-group' *ngIf='question.Type === "–í—ã–±–æ—Ä (—à–∫–∞–ª–∞ –æ—Ü–µ–Ω–æ–∫)"'>
                  <table class='mainpage-question-evaluate'>
                    <tr>
                      <th></th>
                      <th *ngFor='let option of question.Settings.split(";"); let i = index'>{{i + 1}}</th>
                    </tr>
                    <tr *ngFor='let option of question.Settings.split(";")'>
                      <td>{{option}}</td>
                      <td *ngFor='let o of question.Settings.split(";"); let i = index'>
                        <label><input value='{{i + 1}}' on-change='updateAnswerState(globalIndex, $event, "–í—ã–±–æ—Ä (—à–∫–∞–ª–∞ –æ—Ü–µ–Ω–æ–∫)")' [(ngModel)]='tempAnswers[globalIndex][option]' name='{{option}}' type='radio'/></label>
                      </td>
                    </tr>
                  </table>
                </div>
                <div *ngIf='questionsAnswered[globalIndex]' class='mainpage-question-done'>‚úì</div>
              </div>
            </div>
            <div on-click='submitSurvey()' class='mainpage-survey-go'>–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –æ—Ç–≤–µ—Ç—ã</div>
          </div>
        </ng-container>
      </div>
    </ng-container>
    <ng-container *ngIf='answered'>
      <div class='mainpage-message'>
        –ë–æ–ª—å—à–æ–µ —Å–ø–∞—Å–∏–±–æ –∑–∞ –æ—Ç–≤–µ—Ç! üòÑ
      </div>
    </ng-container>
  </ng-container>
</div>
